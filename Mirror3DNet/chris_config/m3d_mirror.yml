_BASE_: "../configs/COCO-InstanceSegmentation/mask_rcnn_R_50_FPN_1x.yaml"
EVAL : False # TODO ---- eval ----


TRAIN_COCO_JSON : ["/project/3dlg-hcvc/jiaqit/m3d/m3d_unzip/coco_input/DE_1280_1024_all_new/pos_train_only_DE.json"] # TODO
TRAIN_IMG_ROOT : ["/project/3dlg-hcvc/jiaqit/m3d/m3d_unzip"] # TODO
TRAIN_NAME : ["train_planercnn_1280_1024_all"]
VAL_COCO_JSON : ["/project/3dlg-hcvc/jiaqit/m3d/m3d_unzip/coco_input/m3d_all_1280_1024_only_dt/pos_test_normalFormat_10_normal.json"] # TODO
VAL_IMG_ROOT : ["/project/3dlg-hcvc/jiaqit/m3d/m3d_unzip"] # TODO
VAL_NAME : ["val_planercnn_1280_1024_all"]


INPUT_RGBD : False
############## planeRCNN configure ##############
DEPTH_EST : True # TODO
ONLY_DE : True # TODO
REFINED_DEPTH : True # TODO
FOCAL_LENGTH : 1076 # TODO set when using plane-refine
INVERSE_DEPTH : False
DEPTH_SHIFT : 4000.0 # TODO



ANCHOR_REG : True # TODO
ANCHOR_REG_METHOD : 1  # TODO # (1) loss with GT residual (2) loss with GT normal 
UNIT_ANCHOR_NORMAL : False # TODO

ANCHOR_CLS : True # TODO
ANCHOR_NORMAL_NYP : "/local-scratch/share_data/mirror3D/m3d/m3d_all_normal/m3d_kmeans_normal_10.npy"  # TODO 

############## eval configure ##############
EVAL_PLOT_IMAGE : False  # TODO ---- eval ----
SAVE_DEPTH_IMG : False
REF_DEPTH_TO_REFINE : "/project/3dlg-hcvc/jiaqit/waste/vnl_output/2020-11-14-20-21-46/vnl_mask_gtDepth_pDepth_npDepth.txt"
REF_MODE : "DE_border" # TODO " rawD_mirror / rawD_border / DE_mirror / DE_border " 
REF_BORDER_WIDTH : 50
EVAL_RES_BBOX : False # TODO


############## network configure ##############
MODEL:
  WEIGHTS : "/local-scratch/jiaqit/exp/chris_mirror_proj/planercnn_chris/important_checkpoint/train_m3d_all_640_480_ransac_10_m3d_normal_all_640_480_ransac_2020-10-25-19-54-25/model_0072999.pth" # TODO ---- eval ---- # "./weight/R-50.pkl"
  DEVICE : "cuda:0" # TODO
  ROI_HEADS:
    BATCH_SIZE_PER_IMAGE : (128) # chris : set to largest
    NUM_CLASSES : 1 # chris : only predict mirror; one class 

TEST:
  EVAL_PERIOD: 100 # TODO ---- eval ----
  AUG:
    ENABLED : False 

SOLVER:
  STEPS : (7000, 8000) # TODO
  MAX_ITER : (50000) # TODO
  IMS_PER_BATCH : 1 # TODO max 16
  BASE_LR : 1e-5 # TODO
  CHECKPOINT_PERIOD : 5000

DATALOADER:
  NUM_WORKERS : 1
  FILTER_EMPTY_ANNOTATIONS : False
  
INPUT:
  MIN_SIZE_TRAIN : (1024,)
  MAX_SIZE_TRAIN : 1280
  MIN_SIZE_TEST : (1024,)
  MAX_SIZE_TEST : 1280

